<div class="container-main d-flex flex-column">
  <div class="row px-3 mt-4 mb-4">
    <h3> Fechar caixa </h3>
  </div>

  <div *ngIf="box" class="row">
    <div class="col-4 d-none d-md-flex">
      <img src="../../../../../assets/images/closebox.png" alt="Image Box" />
    </div>
    <div class="col-12 col-md-8">
      <div class="card">
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="save()">
            <h5> <span class="text-warning"> <i class="fas fa-info-circle"></i> </span> Informações do caixa {{
              box.status === 'FE' && ' - Caixa fechado' }} </h5>

            <table class="table mt-4">
              <tbody>
                <tr class="table-blue">
                  <td class="col text-warning">
                    <i class="far fa-user"></i>
                  </td>
                  <td class="col-4">Usuário</td>
                  <td class="col-8"> {{ box && box.user?.name }} </td>
                </tr>
                <tr class="">
                  <td class="col text-primary">
                    <i class="far fa-clock"></i>
                  </td>
                  <td class="col-4">Caixa N° 114</td>
                  <td class="col-8"> {{ box.date_hour | date:'dd/MM/yyyy' }} às {{ box.date_hour | date: 'HH:mm:ss' }}
                  </td>
                </tr>
                <tr class="table-blue">
                  <td class="col text-success">
                    <i class="fas fa-dollar-sign"></i>
                  </td>
                  <td class="col-4">Fundo de Caixa</td>
                  <td class="col-8"> {{box.value_init | currency:'BRL':'symbol':'1.2-2':'pt-BR'}} </td>
                </tr>
              </tbody>
            </table>

            <hr>

            <table class="table mt-4">
              <tbody>
                <tr class="table-blue">
                  <td class="col text-success">
                    <i class="far fa-money-bill-alt"></i>
                  </td>
                  <td class="col-4">Dinheiro</td>
                  <td class="col-8">
                    <input formControlName="value_money" [readOnly]="disabled" type="text" class="form-control"
                      (keyup)="utilsService.formatNumberMoney(form.controls['value_money'])"
                      (keydown)="utilsService.formatNumberMoney(form.controls['value_money'])"
                      (keypress)="utilsService.formatNumberMoney(form.controls['value_money'])" placeholder="0,00">
                  </td>
                </tr>
                <tr class="">
                  <td class="col text-warning">
                    <i class="fas fa-credit-card"></i>
                  </td>
                  <td class="col-4">Crédito</td>
                  <td class="col-8">
                    <input formControlName="value_credit" type="text" [readOnly]="disabled" class="form-control"
                      (keyup)="utilsService.formatNumberMoney(form.controls['value_credit'])"
                      (keydown)="utilsService.formatNumberMoney(form.controls['value_credit'])"
                      (keypress)="utilsService.formatNumberMoney(form.controls['value_credit'])" placeholder="0,00">
                  </td>
                </tr>
                <tr class="table-blue">
                  <td class="col text-primary">
                    <i class="fas fa-dollar-sign"></i>
                  </td>
                  <td class="col-4">Débito</td>
                  <td class="col-8">
                    <input formControlName="value_debit" type="text" [readOnly]="disabled" class="form-control"
                      (keyup)="utilsService.formatNumberMoney(form.controls['value_debit'])"
                      (keydown)="utilsService.formatNumberMoney(form.controls['value_debit'])"
                      (keypress)="utilsService.formatNumberMoney(form.controls['value_debit'])" placeholder="0,00">
                  </td>
                </tr>
                <tr class="">
                  <td class="col text-dark">
                    <i class="fas fa-cart-plus"></i>
                  </td>
                  <td class="col-4">Outros</td>
                  <td class="col-8">
                    <input formControlName="value_others" type="text" [readOnly]="disabled" class="form-control"
                      (keyup)="utilsService.formatNumberMoney(form.controls['value_others'])"
                      (keydown)="utilsService.formatNumberMoney(form.controls['value_others'])"
                      (keypress)="utilsService.formatNumberMoney(form.controls['value_others'])" placeholder="0,00">
                  </td>
                </tr>
              </tbody>
            </table>

            <hr>

            <textarea formControlName="observacoes" class="form-control" [readOnly]="disabled"
              placeholder="Observações..."></textarea>

            <table class="table mt-4">
              <tbody>
                <tr class="table-blue">
                  <td class="col-6">
                    <a [routerLink]="['../../list']" class="btn btn-secondary"> Sair </a>
                  </td>
                  <td class="col-6">
                    <button type="submit" class="btn btn-danger" [ngClass]="{'disabled': disabled}"> Fechar Caixa
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
      </div>
    </div>
  </div>

</div>